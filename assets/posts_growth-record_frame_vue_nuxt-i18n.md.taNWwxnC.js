import{_ as a,D as n,c as l,o as t,a6 as s,I as p}from"./chunks/framework.BOyJDVBP.js";const u=JSON.parse('{"title":"Nuxt æ­å»º i18n å›½é™…åŒ–","description":"","frontmatter":{"title":"Nuxt æ­å»º i18n å›½é™…åŒ–","date":"2020-04-30T20:00:00.000Z","tags":["Vue","Nuxt"],"categories":["å‰ç«¯è¿›å‡»"]},"headers":[],"relativePath":"posts/growth-record/frame/vue/nuxt-i18n.md","filePath":"posts/growth-record/frame/vue/nuxt-i18n.md","lastUpdated":1713625033000}'),h={name:"posts/growth-record/frame/vue/nuxt-i18n.md"},k=s('<h1 id="nuxt-æ­å»º-i18n-å›½é™…åŒ–" tabindex="-1">Nuxt æ­å»º i18n å›½é™…åŒ– <a class="header-anchor" href="#nuxt-æ­å»º-i18n-å›½é™…åŒ–" aria-label="Permalink to &quot;Nuxt æ­å»º i18n å›½é™…åŒ–&quot;">â€‹</a></h1><h3 id="ä¸€ã€éœ€æ±‚èƒŒæ™¯" tabindex="-1">ä¸€ã€éœ€æ±‚èƒŒæ™¯ <a class="header-anchor" href="#ä¸€ã€éœ€æ±‚èƒŒæ™¯" aria-label="Permalink to &quot;ä¸€ã€éœ€æ±‚èƒŒæ™¯&quot;">â€‹</a></h3><p>å› å…¬å¸å‘å±•ï¼Œä¸šåŠ¡éœ€æ±‚ï¼Œéœ€è¦æ”¯æŒä¼šå‘˜ç«¯çš„è‹±æ–‡ç‰ˆæœ¬å±•ç¤ºï¼Œæ‰€ä»¥ PC ç«¯å’Œç§»åŠ¨ç«¯éœ€è¦æ”¯æŒè¯­è¨€ç¯å¢ƒåˆ‡æ¢çš„é€‰é¡¹ä¾›ç”¨æˆ·é€‰æ‹©ã€‚</p><h3 id="äºŒã€æŠ€æœ¯åˆ†æ" tabindex="-1">äºŒã€æŠ€æœ¯åˆ†æ <a class="header-anchor" href="#äºŒã€æŠ€æœ¯åˆ†æ" aria-label="Permalink to &quot;äºŒã€æŠ€æœ¯åˆ†æ&quot;">â€‹</a></h3><h4 id="_2-1-nuxt-ä»‹ç»" tabindex="-1">2.1. Nuxt ä»‹ç»ï¼š <a class="header-anchor" href="#_2-1-nuxt-ä»‹ç»" aria-label="Permalink to &quot;2.1. Nuxt ä»‹ç»ï¼š&quot;">â€‹</a></h4><p>Nuxt.js æ˜¯ä¸€ä¸ªåŸºäº Vue.js çš„é€šç”¨åº”ç”¨æ¡†æ¶ã€‚é€šè¿‡å¯¹å®¢æˆ·ç«¯/æœåŠ¡ç«¯åŸºç¡€æ¶æ„çš„æŠ½è±¡ç»„ç»‡ï¼ŒNuxt.js ä¸»è¦å…³æ³¨çš„æ˜¯åº”ç”¨çš„ <strong>UI æ¸²æŸ“</strong>ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªçµæ´»çš„åº”ç”¨æ¡†æ¶ï¼Œä½ å¯ä»¥åŸºäºå®ƒåˆå§‹åŒ–æ–°é¡¹ç›®çš„åŸºç¡€ç»“æ„ä»£ç ï¼Œæˆ–è€…åœ¨å·²æœ‰ Node.js é¡¹ç›®ä¸­ä½¿ç”¨ Nuxt.jsã€‚</p><p>Nuxt.js é¢„è®¾äº†åˆ©ç”¨ Vue.js å¼€å‘<strong>æœåŠ¡ç«¯æ¸²æŸ“</strong>çš„åº”ç”¨æ‰€éœ€è¦çš„å„ç§é…ç½®ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æä¾›äº†ä¸€ç§å‘½ä»¤å«ï¼š<code>nuxt generate</code> ï¼Œä¸ºåŸºäº Vue.js çš„åº”ç”¨æä¾›ç”Ÿæˆå¯¹åº”çš„é™æ€ç«™ç‚¹çš„åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬ç›¸ä¿¡è¿™ä¸ªå‘½ä»¤æ‰€æä¾›çš„åŠŸèƒ½ï¼Œæ˜¯å‘å¼€å‘é›†æˆå„ç§å¾®æœåŠ¡ï¼ˆMicroservicesï¼‰çš„ Web åº”ç”¨è¿ˆå¼€çš„æ–°ä¸€æ­¥ã€‚ ä½œä¸ºæ¡†æ¶ï¼ŒNuxt.js ä¸º <code>å®¢æˆ·ç«¯/æœåŠ¡ç«¯</code> è¿™ç§å…¸å‹çš„åº”ç”¨æ¶æ„æ¨¡å¼æä¾›äº†è®¸å¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼Œä¾‹å¦‚å¼‚æ­¥æ•°æ®åŠ è½½ã€ä¸­é—´ä»¶æ”¯æŒã€å¸ƒå±€æ”¯æŒç­‰ã€‚</p><h4 id="_2-2-i18n-ä»‹ç»" tabindex="-1">2.2. i18n ä»‹ç»ï¼š <a class="header-anchor" href="#_2-2-i18n-ä»‹ç»" aria-label="Permalink to &quot;2.2. i18n ä»‹ç»ï¼š&quot;">â€‹</a></h4><p>å…·æœ‰åŠ¨æ€ json å­˜å‚¨çš„è½»é‡çº§ç®€å•ç¿»è¯‘æ¨¡å—ã€‚ æ”¯æŒ Node.js åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”åº”ä¸ä»»ä½•æš´éœ²äº†ä¼ å…¥ res å’Œ req å¯¹è±¡çš„ <code>app.use()</code> æ–¹æ³•çš„æ¡†æ¶ï¼ˆä¾‹å¦‚ expressï¼Œrestify ä»¥åŠæ›´å¤šï¼‰ä¸€èµ·ä½¿ç”¨ã€‚ åœ¨åº”ç”¨ç¨‹åºå’Œæ¨¡æ¿ä¸­ä½¿ç”¨é€šç”¨çš„__ï¼ˆ&#39;...&#39;ï¼‰è¯­æ³•ã€‚ å°†è¯­è¨€æ–‡ä»¶å­˜å‚¨åœ¨ä¸ webtranslateit json æ ¼å¼å…¼å®¹çš„ json æ–‡ä»¶ä¸­ã€‚ é¦–æ¬¡åœ¨æ‚¨çš„åº”ç”¨ä¸­ä½¿ç”¨æ—¶ï¼Œå³æ—¶æ·»åŠ æ–°å­—ç¬¦ä¸²ã€‚ æ— éœ€é¢å¤–çš„è§£æã€‚</p><h4 id="_2-3-nuxt-å’Œ-i18n-ç»“åˆ" tabindex="-1">2.3. Nuxt å’Œ i18n ç»“åˆï¼š <a class="header-anchor" href="#_2-3-nuxt-å’Œ-i18n-ç»“åˆ" aria-label="Permalink to &quot;2.3. Nuxt å’Œ i18n ç»“åˆï¼š&quot;">â€‹</a></h4><p>å› ä¸º Nuxt æ˜¯å±äº SSR åº”ç”¨æ¡†æ¶ï¼Œè·Ÿ Vue-Cli è„šæ‰‹æ¶ä¸åŒçš„æ˜¯ï¼Œå‰ç«¯ä»£ç å†æœåŠ¡ç«¯è¿è¡Œè§£æï¼Œç„¶åè¿”å›ç»™æˆ‘æµè§ˆå™¨å‘ˆç°æ•ˆæœï¼Œæ‰€ä»¥å¾ˆå¤š JavaScript ä»£ç å’Œ DOM æ“ä½œéœ€è¦ç‰¹å®šçš„ç¯å¢ƒæ‰èƒ½æ‰§è¡Œï¼Œæœªèƒ½èƒ½è®© Nuxt åº”ç”¨å›½é™…åŒ–ï¼Œå®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡æ’ä»¶å¼•å…¥æ–¹å¼å®ç°å›½é™…åŒ–ç¨‹åºåˆå§‹åŒ–é…ç½®ï¼ˆpluginsï¼‰ï¼Œç”¨æˆ·æ ¹æ®é€‰é¡¹åˆ‡æ¢è¯­è¨€ç¯å¢ƒæ—¶ï¼Œé€šè¿‡urlè·¯å¾„æ–°å¢è¯­è¨€æ ‡è¯†ç¬¦åˆ‡æ¢å½“å‰è·¯å¾„ï¼Œæ‰§è¡Œä¸­é—´ä»¶ï¼ˆmiddlewareï¼‰æ”¹å˜i18nè¯­è¨€é…ç½®é¡¹ï¼Œå’Œ Vuex çš„ store å­˜å‚¨ï¼Œæ¥è¾¾åˆ°è¯­è¨€åˆ‡æ¢çš„ç›®çš„ã€‚</p><p>å¦‚å›¾çœ‹ä¸€ä¸‹ Nuxt ç”Ÿå‘½å‘¨æœŸç†è§£ä¸€ä¸‹ï¼š</p>',13),e=s(`<h3 id="ä¸‰ã€è§£å†³æ­¥éª¤" tabindex="-1">ä¸‰ã€è§£å†³æ­¥éª¤ï¼š <a class="header-anchor" href="#ä¸‰ã€è§£å†³æ­¥éª¤" aria-label="Permalink to &quot;ä¸‰ã€è§£å†³æ­¥éª¤ï¼š&quot;">â€‹</a></h3><h4 id="_3-1-ç®€å•è¯´æ˜" tabindex="-1">3.1. ç®€å•è¯´æ˜ï¼š <a class="header-anchor" href="#_3-1-ç®€å•è¯´æ˜" aria-label="Permalink to &quot;3.1. ç®€å•è¯´æ˜ï¼š&quot;">â€‹</a></h4><ul><li>å®‰è£… vue-i18n å¹¶ä¸”åˆ›å»º <code>store.js</code>ï¼ˆVuex çŠ¶æ€ç®¡ç†ï¼‰æ–‡ä»¶ï¼›</li><li>åˆ›å»ºä¸€ä¸ªï¼ˆmiddlewareï¼‰ä¸­é—´ä»¶ï¼Œç”¨æ¥ç®¡ç†ä¸åŒçš„è¯­è¨€ï¼›</li><li>åˆ›å»ºä¸åŒè¯­è¨€çš„ json æ–‡ä»¶ä½œä¸ºè¯­è¨€åŒ…ï¼ˆä¾‹å¦‚ï¼š <code>~locales/en.json</code>ï¼‰ï¼›</li><li>åœ¨ pages æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œå¹¶è¿›è¡Œç¿»è¯‘ã€‚</li></ul><h4 id="_3-2-è¯¦ç»†æ­¥éª¤" tabindex="-1">3.2. è¯¦ç»†æ­¥éª¤ï¼š <a class="header-anchor" href="#_3-2-è¯¦ç»†æ­¥éª¤" aria-label="Permalink to &quot;3.2. è¯¦ç»†æ­¥éª¤ï¼š&quot;">â€‹</a></h4><p><strong>æ³¨ï¼šæ­¤å¤„ä»¥ photon-member-fe é¡¹ç›®åˆ›å»ºè¿‡ç¨‹ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚</strong></p><ul><li>ï¼ˆ1ï¼‰å…ˆå®‰è£… vue-i18n:</li></ul><p><code>yarn add vue-i18n\`\`--save</code></p><ul><li>ï¼ˆ2ï¼‰é…ç½® store æ–‡ä»¶ï¼š</li></ul><p><code>store/state.js</code>:ï¼ˆé…ç½®é»˜è®¤å€¼ï¼‰</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	fallbackLocale: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zh-cn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é»˜è®¤æ˜¾ç¤ºè¯­è¨€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	locale: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zh-cn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å½“å‰é…ç½®è®¿é—®è¯­è¨€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	locales: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zh-cn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é…ç½®å¯é€‰è¯­è¨€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span></span></code></pre></div><p><code>store/mutations.js</code>: ï¼ˆé…ç½®ä¿®æ”¹è¯­è¨€å‚æ•°äº‹ä»¶ï¼‰</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  SET_LANG</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">payload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (state.locales.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payload)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			state.locale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> payload</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span></code></pre></div><ul><li>ï¼ˆ3ï¼‰é…ç½® plugins æ–‡ä»¶ï¼š</li></ul><p>plugins ç›®å½•ä¸‹æ–°å»º <code>i18n.js</code> æ–‡ä»¶åŠé…ç½®å¦‚ä¸‹ï¼š</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VueI18n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue-i18n&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../lang&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(VueI18n)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fallbackLocale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">locale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	app.i18n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VueI18n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		locale,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fallbackLocale, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½®é»˜è®¤é€‰ä¸­è¯­è¨€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		messages,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		silentTranslationWarn: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // æ˜¯å¦å–æ¶ˆæœ¬åœ°åŒ–å¤±è´¥æ—¶è¾“å‡ºçš„è­¦å‘Šã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	app.i18n.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">link</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">		// æ ¹æ®é€‰ä¸­çš„è¯­è¨€åˆ‡æ¢è·¯å¾„è½¬æ¢è°ƒç”¨æ–¹æ³• ï¼Œå¯åœ¨é¡µé¢è°ƒç”¨è½¬æ¢è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (app.i18n.locale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app.i18n.fallbackLocale) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i18n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">locale</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>ï¼ˆ4ï¼‰é…ç½®è¯­è¨€ lang æ–‡ä»¶ï¼š</li></ul><p>åœ¨ client ç›®å½•ä¸‹æ–°å»º lang æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸‹æ–°å¢ <code>index.js</code> æ–‡ä»¶ï¼Œé…ç½®è¯­è¨€å‚æ•°å¯¹åº”åŒ…æ–‡ä»¶å†…å®¹ï¼š</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> enLocale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;element-ui/lib/locale/lang/en&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> zhLocale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;element-ui/lib/locale/lang/zh-CN&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> enLocal </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./en&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> zhLocal </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./zh-CN&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">	&#39;zh-cn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">zhLocal,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">zhLocale</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	en: {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">enLocal,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">enLocale</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>åœ¨ lang æ–‡ä»¶å¤¹ä¸‹ æ–°å¢ <code>zh-CN.js</code> æ–‡ä»¶å’Œ <code>en.js</code> æ–‡ä»¶ï¼Œä¸¤è€… JSON æ•°æ®æ ¼å¼ï¼Œä¸¤è€…å†…å®¹ key å­—æ®µå¯¹é½ï¼Œå¦‚ï¼š <code>zh-CN.js</code>:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	lang: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zh-cn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	app: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		confirm: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			systemIncompatibilityTips: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ¸©é¦¨æç¤º&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			systemIncompatibilityTipsContent:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">				&#39;æ‚¨å¥½ï¼å½“å‰ä½¿ç”¨çš„ IE æµè§ˆå™¨å¯èƒ½å¯¼è‡´éƒ¨åˆ†ç³»ç»ŸåŠŸèƒ½ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå»ºè®®ä½¿ç”¨ IE 10 åŠä»¥ä¸Šæˆ–æ›´æ¢å…¶ä»–æµè§ˆå™¨ï¼Œæ„Ÿè°¢æ‚¨çš„é…åˆï¼&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span></code></pre></div><p><code>en.js</code>:</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	lang: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	app: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		confirm: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			systemIncompatibilityTips: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Tips&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			systemIncompatibilityTipsContent: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello! The currently used IE browser may cause some system functions to not work properly. It is recommended to use IE 10 or above or replace other browsers. Thank you for your cooperation!&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		},</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span></code></pre></div><ul><li>ï¼ˆ5ï¼‰é…ç½® middleware ä¸­é—´ä»¶ï¼š</li></ul><p>åœ¨ middleware æ–‡ä»¶å¤¹ä¸‹ æ–°å»º <code>i18n.js</code> æ–‡ä»¶ï¼ˆé…ç½®urlè¯­è¨€åˆ‡æ¢è·¯å¾„ï¼‰ï¼š</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	isHMR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">	redirect</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> defaultLocale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app.i18n.fallbackLocale</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// If middleware is called from hot module replacement, ignore it</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isHMR) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// Get locale from params</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> locale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> params.lang </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultLocale</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// 404/500 æŠ¥é”™ç¿»è¯‘é—®é¢˜ï¼Œè·å–ä¸åˆ° params.lang å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">params.lang) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		store.state.locales.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">element</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">			if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (route.fullPath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`/\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">element</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				locale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> element</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">store.state.locales.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(locale)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;This page could not be found.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			statusCode: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">404</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// Set locale éœ€æ³¨æ„ ï¼Œvuex é¡µé¢åˆ·æ–°åçŠ¶æ€å°†ä¸å†ä¿å­˜ï¼Œè‹¥éœ€ä¿å­˜ï¼Œå¯ä½¿ç”¨ localstorage</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SET_LANG&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, locale)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	app.i18n.locale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.state.locale</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// If route is /&lt;defaultLocale&gt;/... -&gt; redirect to /...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (locale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultLocale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> route.fullPath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultLocale) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> toReplace</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;^/&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultLocale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (route.fullPath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">indexOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultLocale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> re</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RegExp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(toReplace)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">		return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			route.fullPath.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(re, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>ï¼ˆ6ï¼‰é…ç½® <code>nuxt.config.js</code> æ–‡ä»¶ï¼š</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼•å…¥åˆå§‹åŒ– i18n é…ç½®ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	plugins</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">		&#39;@/plugins/i18n&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   ],</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  router</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é…ç½®ä¸­é—´ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;checkHome&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;i18n&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">		extendRoutes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(routes, resolve) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			routes.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				children: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">					// ä¸å¸¦è·¯å¾„, é»˜è®¤è®¿é—®é¦–é¡µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">						redirect: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/login&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">					}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">				]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">			})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	},</span></span></code></pre></div><ul><li>ï¼ˆ7ï¼‰ä¿®æ”¹ pages æ–‡ä»¶å¤¹ä¸‹ç›¸åº”çš„é¡µé¢ï¼š</li></ul><p>åœ¨ pages æ–‡ä»¶å¤¹ä¸‹æ–°å»º <code>_lang</code> æ–‡ä»¶å¤¹ï¼Œä¹‹ååœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹æ–°å»ºå¯¹åº”çš„é¡µé¢æ–‡ä»¶ï¼ˆè®¿é—®è·¯å¾„ä¸€è‡´ï¼‰ï¼Œä¾‹å¦‚ï¼š é»˜è®¤è®¿é—®ä¸­æ–‡é¡µé¢ç™»å½•é¡µï¼š<code>localhost:8121/login</code> è‹±æ–‡è®¿é—®è·¯å¾„ï¼š<code>localhost:8121/en/login</code> ğŸ‘‡åˆ›å»ºå¯¹åº” login æ–‡ä»¶ <code>@/pages/_lang/login.vue</code></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">import Index from &#39;~/pages/login&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">export default Index</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>ç»„ä»¶ä¸­æ˜¾ç¤ºè¯­è¨€é…ç½®ï¼Œå¦‚ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>{{ $t(&#39;app.label.login&#39;) }}</span></span></code></pre></div><p>åˆ‡æ¢è¯­è¨€ç¯å¢ƒï¼šå¯ä»¥é€šè¿‡ <code>location.pathname</code> è®¾ç½® urlã€‚</p><ul><li>é…ç½® request è¯·æ±‚é“¾æ¥ header å¸¦è¯­è¨€å‚æ•°ï¼š</li></ul><p><code>plugins/route.js</code> (åªä¼šåœ¨æµè§ˆå™¨æ‰§è¡Œ)ï¼š</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// è®¾ç½®è¯­è¨€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.client) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		localStorage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;helpers__lang&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, app.store.state.locale)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ...</span></span></code></pre></div><p><code>plugins/api/request.js</code> (é…ç½®è¯·æ±‚å¤´è¯­è¨€å‚æ•°)ï¼š</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// è®¾ç½®è¯·æ±‚è¯­è¨€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.client) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		services.defaults.headers.helpers__lang </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> localStorage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getItem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;helpers__lang&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span></span></code></pre></div><p>js æ–‡ä»¶å¼•ç”¨å›½é™…åŒ–ï¼š <code>utils/i18n.js</code> (é…ç½®å›½é™…åŒ–æ¨¡å—åŒ–)ï¼š</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VueI18n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue-i18n&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/store/state.js&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messages </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/lang&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> locale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> state</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().fallbackLocale </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½®é»˜è®¤è¯­è¨€ç¯å¢ƒ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è®¾ç½®ç¼“å­˜é‡Œçš„è¯­è¨€ç¯å¢ƒè®¾ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.client) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	locale </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> location.pathname.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/en/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;en&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;zh-cn&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> i18n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VueI18n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	locale,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	messages</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i18n</span></span></code></pre></div><p>å¼•ç”¨çš„ js æ–‡ä»¶ï¼š</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i18n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/utils/i18n&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> emailStr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i18n.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">t</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;app.validator.email&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="å››ã€æ€»ç»“å½’çº³" tabindex="-1">å››ã€æ€»ç»“å½’çº³ï¼š <a class="header-anchor" href="#å››ã€æ€»ç»“å½’çº³" aria-label="Permalink to &quot;å››ã€æ€»ç»“å½’çº³ï¼š&quot;">â€‹</a></h3><ol><li>åˆ‡æ¢è¯­è¨€ï¼Œä¸åˆ·æ–°é¡µé¢ã€‚ã€åªéœ€è¦åœ¨åˆ‡æ¢çš„æ—¶å€™ï¼Œè®¾ç½® store ä¸­çš„ locale å€¼ä¸ºå¯¹åº”çš„ language å€¼ï¼Œä¸åšå…¶ä»–æ“ä½œã€‘ï¼Œç›®å‰åšä¸åˆ°ï¼Œä¸ç®¡æ˜¯ Vue-cli è¿˜æ˜¯ Nuxt éƒ½æ˜¯éœ€è¦çš„ï¼›</li><li>åˆ·æ–°é¡µé¢ä¹‹åï¼Œè¿˜æ˜¯å½“å‰è¯­è¨€ã€‚ã€è¿™ä¸ªéœ€è¦å°†è®¾ç½®å¥½çš„è¯­è¨€ä¿å­˜èµ·æ¥ï¼Œæ”¾åˆ°æœ¬åœ°ç¼“å­˜ä¸­ï¼Œæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä½†æ˜¯ä¸åˆ©äºåˆ†äº«ï¼Œå› ä¸º Nuxt æ˜¯ SSR åŸå› ï¼Œæ›´å¥½çš„æ˜¯é€šè¿‡ url è®¾ç½®è¯­è¨€ç¯å¢ƒå»è®¾ç½®é¡µé¢æ˜¾ç¤ºçš„è¯­è¨€ã€‘ï¼›</li><li>æ ¹æ®æµè§ˆå™¨çš„è¯­è¨€ï¼Œæ˜¾ç¤ºè¯­è¨€ã€‚ã€ä½¿ç”¨ <code>navigator.language</code> æ¥è·å–æµè§ˆå™¨é»˜è®¤è¯­è¨€ï¼Œä¹‹åå°†å…¶èµ‹å€¼ç»™ä¸º store ä¸­çš„ locale å€¼ï¼Œå¯ä»¥å°è¯•åšã€‘ï¼›</li><li>æ˜¾ç¤ºä½•ç§è¯­è¨€ï¼Œæ˜¯ç”± <code>$i18n.locale</code> å†³å®šçš„ã€‚</li></ol><p>å®˜æ–¹ç½‘ç«™æ¡ˆä¾‹ï¼š</p><ul><li><a href="https://zh.nuxtjs.org/examples/i18n" target="_blank" rel="noreferrer">https://zh.nuxtjs.org/examples/i18n</a></li></ul>`,46);function E(r,d,g,c,y,o){const i=n("CustomImage");return t(),l("div",{"data-pagefind-body":!0},[k,p(i,{src:"/growth-record/frame/vue/nust-i18n.svg"}),e])}const A=a(h,[["render",E]]);export{u as __pageData,A as default};
